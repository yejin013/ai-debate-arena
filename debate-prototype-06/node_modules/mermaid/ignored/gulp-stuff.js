/**
 * Created by knut on 14-12-11.
 */
gulp.task("dox",function(){
    return gulp.src("./src/*.js")
        .pipe(dox())
        .pipe(gulp.dest("./docs/json"));
});

var extReplace = require('gulp-ext-replace');

var dox2md = require('./gulp/plugins/json2md');
gulp.task('mdoc', function () {
    return gulp.src('./src/*.js')
        .pipe(dox({raw:true}))
        .pipe(gulp.dest('./docs/json'))
        .pipe(dox2md())
        .pipe(extReplace('.md'))
        .pipe(gulp.dest('./docs/md'));
});

var gulpsmith = require('gulpsmith');
gulp.task('site', function () {
    gulp.src("./docs/md/**/*.md")
        .pipe(
        gulpsmith()     // defaults to process.cwd() if no dir supplied

            // You can initialize the metalsmith instance with metadata
            .metadata({site_name: "My Site"})

            // and .use() as many Metalsmith plugins as you like
            .use(markdown())
        //.use(permalinks('posts/:title'))
    )
        .pipe(gulp.dest("./docs/site"));
});