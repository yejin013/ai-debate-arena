[
  {
    "tags": [],
    "description": {
      "full": "Created by knut on 14-11-18.",
      "summary": "Created by knut on 14-11-18.",
      "body": ""
    },
    "isPrivate": false,
    "ignore": false,
    "code": "var sq = require('./parser/sequence').parser;\n\n//console.log(sq.parse('a12:d12\\na24:d24'));\n\nstr = 'a12:d12\\n\\na24:d24';\n//console.log(str);\n//console.log(sq.parse(str));\n//console.log(sq.parse('[]\\n[]'));\n\nstr = 'bfs:queue\\n\\nbfs3:queue\\n';\nstr =  str + 'bfs:message=someNode.setLevel\\n';\nstr =  str + 'bfs:message2=someNode.setLevel2';\n//console.log(str);\n//console.log(sq.parse(str));\n\nstr = 'bfs:BFS\\n';\nstr = str + 'someNode:SomeNode\\n';\nstr = str + 'bfs:queue.new\\n';\nstr = str + 'bfs:someNode.setLevel';\n//console.log(str);\n//console.log(sq.parse(str));\n\n\ndescribe('when parsing ',function() {\n    var parseError;\n    beforeEach(function () {\n        sq = require('./parser/sequence').parser;\n        sq.yy = require('./sequenceDb');\n        sq.yy.clear();\n        parseError = function(err, hash) {\n            console.log('Syntax error:' + err);\n        };\n        sq.yy.parseError = parseError;\n    });\n\n    it('should handle a sequence defintion', function () {\n        str = 'sequence TB\\nbfs1:queue';\n\n        sq.parse(str);\n        var actors = sq.yy.getActors();\n        actors.bfs1.description = 'queue';\n    });\n\n    it('should handle an actor', function () {\n        str = 'sequence TB\\nbfs1:queue';\n\n        sq.parse(str);\n        var actors = sq.yy.getActors();\n        actors.bfs1.description = 'queue';\n    });\n\n    it('should handle an actor with space in its description', function () {\n        str = 'sequence TB\\nbfs1:The queue\\n';\n\n        sq.parse(str);\n        var actors = sq.yy.getActors();\n        actors.bfs1.description = 'queue';\n    });\n\n    it('should handle a statement ending with a newline', function () {\n        str = 'sequence TB\\nbfs1:queue\\n';\n\n        sq.parse(str);\n        var actors = sq.yy.getActors();\n        actors.bfs1.description = 'queue';\n    });\n\n    xit('should handle a errors', function () {\n        str = 'sequence TB\\nbfs1!!!!queue\\n';\n\n        spyOn('sq.yy',parseError);\n        sq.parse(str);\n\n        //expect(sq.yy.parseError).toHaveBeenCalled();\n    });\n\n    it('should handle multiple actors', function () {\n        str = 'sequence TB\\nbfs1:queue\\n\\nbfs2:queue';\n\n        sq.parse(str);\n        var actors = sq.yy.getActors();\n        actors.bfs1.description = 'queue';\n        actors.bfs2.description = 'queue';\n    });\n\n    it('should handle a message with response', function () {\n        str = 'sequence TB\\nbfs1:queue\\n\\nbfs2:queue\\n';\n        str =  str + 'bfs1:message=bfs2.setLevel(0)';\n        //console.log(str);\n        sq.parse(str);\n        var messages = sq.yy.getMessages();\n        expect(messages.length).toBe(1);\n        expect(messages[0].from).toBe('bfs1');\n    });\n\n    it('should handle a message with no response', function () {\n        str = 'sequence TB\\nbfs1:queue\\n\\nbfs2:queue\\n';\n        str =  str + 'bfs1:bfs2.start';\n        //console.log(str);\n        sq.parse(str);\n        var messages = sq.yy.getMessages();\n        expect(messages.length).toBe(1);\n        expect(messages[0].from).toBe('bfs1');\n    });\n});",
    "ctx": {
      "type": "declaration",
      "name": "sq",
      "value": "require('./parser/sequence').parser",
      "string": "sq"
    }
  }
]